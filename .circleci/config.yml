version: 2.1

parameters:
  circle-hostname:
    type: string
    default: "https://server4.fieldeng-sphereci.com"

jobs:
  import-orbs:
    docker:
      - image: circleci/circleci-cli:0.1.30549
    environment:
      CIRCLE_HOSTNAME: << pipeline.parameters.circle-hostname >>
    resource_class: small
    steps:
      - checkout
      - run: circleci setup --host $CIRCLE_HOSTNAME --token $SERVER4_FIELDENG_TOKEN --skip-update-check --no-prompt
      - run: circleci info org --host $CIRCLE_HOSTNAME --token $SERVER4_FIELDENG_TOKEN
      - run:
          name: Import all certified orbs into Server V4 instance
          command: |
            bash import-orbs.sh


workflows:
  main:
    jobs:
      - import-orbs
